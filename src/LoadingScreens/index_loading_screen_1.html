<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Loading Room 1</title>
        <meta name="description" content="Loading Room 1" />
        <script src="https://aframe.io/releases/1.1.0/aframe.min.js"></script>
        <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.0/dist/aframe-extras.min.js"></script>
        <script src="//cdn.rawgit.com/donmccurdy/aframe-physics-system/v4.0.1/dist/aframe-physics-system.min.js"></script>
        <script src="https://unpkg.com/aframe-click-drag-component"></script>
        <script>
            AFRAME.registerComponent("collision-detect", {
                init: function () {
                    this.el.addEventListener("collide", function (e) {
                        console.log(
                            "Player has collided with ",
                            e.detail.body.el
                        );
                        e.detail.target.el; // Original entity (playerEl).
                        e.detail.body.el; // Other entity, which playerEl touched.
                        e.detail.contact; // Stats about the collision (CANNON.ContactEquation).
                        e.detail.contact.ni; // Normal (direction) of the collision (CANNON.Vec3).
                    });
                },
            });
        </script>
        <script>
            AFRAME.registerComponent("detect-button", {
                init: function () {
                    var data = this.data;
                    var el = this.el; // <a-box>
                    var defaultColor = el.getAttribute("material").color;

                    el.addEventListener("mouseenter", function () {
                        el.setAttribute(
                            "animation-button-enter",
                            "property: scale; to: 1.1 1.1 1.1; dur: 500; dir:alternate; startEvents: mouseenter"
                        );
                    });

                    el.addEventListener("mouseleave", function () {
                        el.setAttribute(
                            "animation-button-leave",
                            "property: scale; to: 1 1 1; startEvents: mouseleave"
                        );
                    });
                },
            });
        </script>
    </head>
    <body>
        <a-scene background="color: #ECECEC" physics="debug: true; gravity: 0">
          <a-entity id="container"></a-entity>  
          <a-assets>
                <img
                    id="space"
                    src="https://cdn.glitch.com/dc6d0b45-026f-4966-81e9-f724b0272b3f%2F52595f74-3df6-4cd9-861f-2d85bb57d1ff.image.png?v=1615060043712"
                />
            </a-assets>

            <a-box
                src="#space"
                static-body
                position="0 0 -20"
                width="40"
                height="30"
                depth="1"
                color="#a4f542"
                reverse-gravity
            ></a-box>
            <a-box
                src="#space"
                static-body
                position="0 0 20"
                width="40"
                height="30"
                depth="1"
                color="#42a4f5"
                reverse-gravity
            ></a-box>
            <a-box
                src="#space"
                static-body
                position="20 0 0"
                width="1"
                height="30"
                depth="40"
                color="#f56042"
                reverse-gravity
            ></a-box>
            <a-box
                src="#space"
                static-body
                position="-20 0 0"
                width="1"
                height="30"
                depth="40"
                color="#6642f5"
                reverse-gravity
            ></a-box>
            <a-box
                src="#space"
                static-body
                position="0 15 0"
                width="40"
                height="1"
                depth="40"
                color="#fcba03"
                reverse-gravity
            ></a-box>
            <a-box
                src="#space"
                static-body
                position="0 -15 0"
                width="40"
                height="1"
                depth="40"
                color="#fcba03"
                reverse-gravity
            ></a-box>

            <a-box
                static-body
                position="0 -10 -8"
                width="3"
                height="10"
                depth="3"
                color="#ffffff"
                reverse-gravity
            ></a-box>
            <a-cylinder
                static-body
                position="0 -5 -8"
                radius="1.25"
                height="1"
                color="#ff1500"
                animation__mouseenter="property: scale; to: 1.1 1.1 1.1; dur: 500; dir:alternate; startEvents: mouseenter"
                animation__mouseleave="property: scale; to: 1 1 1; dur: 200; startEvents: mouseleave"
                animation__button-pressed="property: object3D.position.y; to: -5.5; dir: alternate; dur: 50; startEvents: mousedown"
                animation__button-released="property: object3D.position.y; to: -5; dir: alternate; dur: 100; startEvents: mouseup"
                reverse-gravity
            ></a-cylinder>

            <a-entity id="rig" position="0 1.6 0">
                <a-entity
                    id="camera"
                    camera
                    camera-floor
                    look-controls="pointerLockEnabled: true"
                    wasd-controls="acceleration: 200"
                    kinematic-body
                    collision-detect
                >
                    <a-cursor
                        geometry="primitive: ring; radiusInner: 0.01; radiusOuter: 0.015"
                        material="color: white; shader: flat"
                    ></a-cursor>
                </a-entity>
            </a-entity>
        </a-scene>
    </body>
    <script src="gravity.js"></script>
</html>
